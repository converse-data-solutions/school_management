<%= content_for :head do %>
  <%= javascript_import_module_tag "controllers/promoteStudentDatatable" %>
<% end %>
<div class="container bg-[#F5F5F5] mx-auto mb-8 p-1 text-[15px] text-[#39A9E8] pl-4"><span><%=link_to "Home", root_path %></span><span class="mx-2 text-[#aba7a7]">/</span><span>Promote Students</span></div>
<div class=" container mx-auto rounded-lg border-2">
  <div class="px-5 bg-[#EDEDED] flex items-center justify-between text-[#317EAC] shadow-2xl">
    <div><i class="fa-solid fa-pen-to-square"></i>
      <span class="font-semibold">Promote Students</span></div>
    <button class="accordian-header cursor-pointer leading-0 px-1 text-2xl border bg-white text-black font-extrabold rounded-3xl"> <i class="bx bx-chevron-up  "></i></button>
  </div>
  <div class="accordian-body">
    <div class="bg-[#FFFFFF] overflow-scroll mx-[8px] md:mx-2 lg:mx-3 xl:mx-0 ">
      <% if notice %>
        <div class="ml-2">
          <p id="notice"  class="alert text-[#508C47] conatiner text-left text-[14px] rounded bg-[#DFF0D8] mt-2 mr-3 p-3 mb-3"><%= notice %></p>
        </div>
      <% end %>
      <div class='p-3 w-full'>
        <%= form_tag promote_students_path, method: :get do %>
          <div class='flex flex-col md:flex-row gap-2 md:items-center w-full gap-x-6'>
            <div class="w-full md:w-[25%]">
              <%= label_tag :standard, "From Standard", class: 'text-[15px] text-[#555555] font-semibold' %>
              <%= select_tag :standard_id, options_from_collection_for_select(Standard.all, 'id', 'name', params[:standard_id]), prompt: 'Select a Standard', class: "border border-gray-300 bg-[#EEEEEE] text-gray-900 text-sm rounded-[5px] focus:ring-[#37A7E7] focus:border-[#37A7E7] block w-full p-2.0 standard" %>
            </div>
            <div class="w-full md:w-[25%]" id="section-dropdown">
              <%= label_tag :section, "From Section", class: 'text-[15px] text-[#555555] font-semibold' %>
              <%= select_tag :from_section_id, options_from_collection_for_select( Section.where(standard_id: params[:standard_id]), 'id', 'section_name', params[:from_section_id]), prompt: 'Select a Section', class: "border border-gray-300 bg-[#EEEEEE] text-gray-900 text-sm rounded-[5px] focus:ring-[#37A7E7] focus:border-[#37A7E7] block w-full p-2.0 " %>
            </div>
            <div class="w-full md:w-[25%]">
              <%= label_tag :standard, "To Standard", class: 'text-[15px] text-[#555555] font-semibold' %>
              <%= select_tag :to_standard_id, options_from_collection_for_select(Standard.all, 'id', 'name', params[:to_standard_id]), prompt: 'Select a Standard', class: "border border-gray-300 bg-[#EEEEEE] text-gray-900 text-sm rounded-[5px] focus:ring-[#37A7E7] focus:border-[#37A7E7] block w-full p-2.0 standard" %>
            </div>
            <div class="w-full md:w-[25%]" id="to-section-dropdown">
              <%= label_tag :to_section, "To Section", class: 'text-[15px] text-[#555555] font-semibold' %>
              <%= select_tag :to_section_id, options_from_collection_for_select( Section.where(standard_id: params[:to_standard_id]), 'id', 'section_name', params[:to_section_id]), prompt: 'Select a Section', class: "border border-gray-300 bg-[#EEEEEE] text-gray-900 text-sm rounded-[5px] focus:ring-[#37A7E7] focus:border-[#37A7E7] block w-full p-2.0 " %>
            </div>
            <div class="w-full md:w-[25%]">
              <%= check_box_tag :additional_param, true, params[:additional_param] == 'true', class: 'border border-gray-300 bg-[#EEEEEE] text-gray-900 text-sm rounded-[5px] focus:ring-[#37A7E7] focus:border-[#37A7E7] p-2.0' %>
            </div>
            <div class="md:mt-[20px]">
              <%= submit_tag "Filter", id: 'display_submit', class: 'text-white bg-[#81B944] focus:ring-2 hover:ring-[#000] focus:outline-[#000] focus:ring-[#000] font-semibold rounded-[5px] text-sm w-auto sm:w-auto px-4 py-2 text-center' %>
            </div>
          </div>
        <% end %>
      </div>
      <%= form_tag update_sections_students_path, id: 'frm-example', method: :post do %>
        <%= hidden_field_tag 'new_section_id', @to_section %>
        <% default_checked = @all_student == 'true' ? true : false %>
        <table id="promoteTable" class="stripe"  data-source="<%= promote_students_path(format: :json) %>">
          <thead class="bg-[#FFFFFF]">
            <tr>
              <th class="s_no">S.No</th>
              <th class="admission_no">Adm No</th>
              <th class="student_name">Student</th>
              <th class="student_action">Promote Student</th>
            </tr>
          </thead>
          <tbody class="bg-[#F9F9F9] ">
          </tbody>
        </table>
        <%= submit_tag 'Update Sections' %>
        <p><b>Selected rows data:</b></p>
        <pre id="example-console-rows"></pre>
        <p><b>Form data as submitted to the server:</b></p>
        <pre id="example-console-form"></pre>
      <% end %>
    </div>
  </div>
</div>
<%= form_tag update_sections_students_path, method: :post do %>
  <br>
  <% default_checked = @all_student == 'true' ? true : false %>
  <% @students.each do |student| %>
    <%= check_box_tag 'student_ids[]', student.id, default_checked %>
    <%= student.name %> <br>
  <% end %>
  <%= submit_tag 'Update Sections' %>
<% end %>
