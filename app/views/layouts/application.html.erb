<!DOCTYPE html>
<html>
  <head>
    <title>SchoolManagement</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>
    <%= stylesheet_link_tag "tailwind", "inter-font", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "application", "data-turbo-track": "reload" %>
    <%= stylesheet_link_tag "usertable", "data-turbo-track": "reload" %>
    <%= javascript_importmap_tags %>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.25/datatables.min.js"></script>
    <link href='https://unpkg.com/boxicons@2.1.4/css/boxicons.min.css' rel='stylesheet'>
    <%= stylesheet_link_tag 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/css/all.min.css' %>
    <%= javascript_include_tag 'https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.1.0/js/all.min.js' %>
    <%# <link rel="stylesheet" href="https://cdn.datatables.net/1.13.7/css/jquery.dataTables.css" /> %>
    <style>
      div#dropdownNavbar {
            top: 15px !important;
            }
            html, body {
            min-height:100vh;
            font-family: 'Manrope', sans-serif;
            }

      .activenav{

          margin-left: 6px;
          background-color: rgb(47, 164, 231);
          color: white;

         }
         .activenav:hover{
          margin-left: 6px;
          background-color: rgb(47, 164, 231);
          color: white;
         }
    </style>
    <script>
      function openNavForTheme() {
        var theme = $("#themeContent");
        console.log(theme.attr("class"));
        if (theme.hasClass("hidden")) {
          theme.removeClass("hidden");
          $("#admin").addClass("hidden");
        } else {
          theme.addClass("hidden");
        }
      }


           function openNav() {
        var admin = $("#adminContent");
        console.log(admin.attr("class"));
        if (admin.hasClass("hidden")) {
          admin.removeClass("hidden");
          $("#themeContent").addClass("hidden");
        } else {
          admin.addClass("hidden");
        }
      }
    </script>
  </head>
  <body>
    <% if user_signed_in? %>
      <nav class="top-0  absolute z-50 w-full bg-[#39A9E8] border-b  border-gray-200 dark:bg-[#39A9E8] dark:border-gray-700">
        <div class="px-3 md:py-0  lg:px-5 lg:pl-3">
          <div class="flex items-center justify-between">
            <div class="flex items-center justify-start">
              <button data-drawer-target="logo-sidebar" data-drawer-toggle="logo-sidebar"  aria-controls="logo-sidebar" type="button" class="inline-flex items-center p-2 text-sm text-gray-500 rounded-lg sm:hidden hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-gray-200 dark:text-gray-400 dark:hover:bg-gray-700 dark:focus:ring-gray-600">
                <span class="sr-only">Open sidebar</span>
                <svg class="w-6 h-6" aria-hidden="true" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg">
                  <path clip-rule="evenodd" fill-rule="evenodd" d="M2 4.75A.75.75 0 012.75 4h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 4.75zm0 10.5a.75.75 0 01.75-.75h7.5a.75.75 0 010 1.5h-7.5a.75.75 0 01-.75-.75zM2 10a.75.75 0 01.75-.75h14.5a.75.75 0 010 1.5H2.75A.75.75 0 012 10z"></path>
                </svg>
              </button>
              <a href="" class="flex ml-2 md:ml-0 ">
                <img src="<%= asset_path('homescreenlogo.png') %>" alt="Image Description" class="w-[130px] h-[50px]   m-1 lg:w-[150px] lg:h-[58px]" >
              </a>
              <div class="flex lg:gap-4 md:pl-7 lg:pl-10">
                <div class="flex self-center hover:bg-[#157AB5] md:p-3  sm:text-[14px] text-[#fff]" >
                  <div class="hidden lg:block px-1"><i class="fa-regular fa-clock"></i></div>
                  <div class="hidden md:block"> Academic Year: 2023-2024</div>
                </div>
                <div class="flex self-center hover:bg-[#157AB5] md:p-3  sm:text-[14px] text-[#fff] " >
                  <div class="hidden lg:block px-1"><i class="fa-solid fa-envelope"></i></div>
                  <div class="hidden md:block"> SMS Available: 0</div>
                </div>
                <div class="flex self-center hover:bg-[#157AB5] md:p-3  sm:text-[14px] text-[#fff] " id="dropdownNavbarLink" data-dropdown-toggle="dropdownNavbar" >
                  <div class="hidden lg:block text-[12px] px-1"><i class="fa-solid fa-star"></i></div>
                  <div class="hidden md:block px-1">More</div>
                  <div class="hidden md:block px-1"><i class="fa-solid fa-caret-down"></i></div>
                  <div id="dropdownNavbar" class="z-10 hidden font-normal bg-white divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700 dark:divide-gray-600">
                    <ul class="py-2 text-sm text-gray-700 dark:text-gray-400" aria-labelledby="dropdownLargeButton">
                      <li>
                        <a href="#" class="block px-4 py-2 hover:bg-[#39A9E8] dark:hover:bg-gray-600 dark:hover:text-white">User Log</a>
                      </li>
                      <li>
                        <a href="#" class="block px-4 py-2 hover:bg-[#39A9E8] dark:hover:bg-gray-600 dark:hover:text-white">Manage Class</a>
                      </li>
                      <li>
                        <a href="#" class="block px-4 py-2 hover:bg-[#39A9E8] dark:hover:bg-gray-600 dark:hover:text-white">About School</a>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
            </div>
            <div class="flex items-center">
              <div>
                <!-- Dropdown for theme  cerulea cyborg Simplex Darkly-->
                <div class="flex items-center ml-3">
                  <div><button onclick="openNavForTheme()"  class="self-center flex items-center justify-center rounded sm:text-[14px] h-[40px] w-[60px] lg:w-[130px] bg-white text-[#555555] relative"><i class="fa-solid fa-droplet"></i><span class="p-[4px] hidden lg:block">Change Skin</span><span ><i class="fa-solid fa-caret-down"></i></span>
                    </button>
                    <div id="themeContent" class="z-10 hidden font-normal bg-white  absolute right-20 top-20 divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700" >
                      <ul class="py-2 text-sm text-gray-700 dark:text-gray-400">
                        <li value="default"  class="block px-4 py-2 hover:bg-[#39A9E8] dark:hover:bg-gray-600 dark:hover:text-white ">
                          Default
                        </li >
                        <li value="dark" class="block px-4 py-2 hover:bg-[#39A9E8] dark:hover:bg-gray-600 dark:hover:text-white ">
                          dark
                        </li>
                      </ul>
                    </div>
                  </div>
                  <!-- Dropdown menu for user -->
                  <div class="flex items-center ml-3">
                    <div><button onclick="openNav()" class="self-center flex items-center justify-center rounded sm:text-[14px] h-[40px] w-[60px] lg:w-[130px] bg-white text-[#555555] relative"><i class="fas fa-user"></i><span class="p-[4px] hidden lg:block">admin</span><span ><i class="fa-solid fa-caret-down"></i></span>
                      </button>
                      <div id="adminContent" class="z-10  hidden font-normal bg-white  absolute right-0 top-20 divide-y divide-gray-100 rounded-lg shadow w-44 dark:bg-gray-700" >
                        <ul class="py-2 text-sm text-gray-700 dark:text-gray-400">
                          <li>
                            <a href="#" class="block px-4 py-2 hover:bg-[#39A9E8] dark:hover:bg-gray-600 dark:hover:text-white">Profie</a>
                          </li>
                          <li>
                            <%= link_to 'user sign_out', destroy_user_session_path, class:"block px-4 py-2 hover:bg-[#39A9E8] dark:hover:bg-gray-600 dark:hover:text-white"  , data: { turbo_method: :delete } %>
                          </li>
                        </ul>
                      </div>
                    </li>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </nav>
        <%# side nav bar %>
        <div class="flex justify-end" id="sidebar">
          <aside id="logo-sidebar" class="absolute md:relative top-0 mt-0 pt-20 left-0 z-40 bg-black opacity-[0.8] w-[70%] sm:w-[120px] sm:opacity-[100%] lg:w-[300px] h-screen overflow-y-auto  transition-transform -translate-x-full sm:bg-white pl-0 md:pl-3  sm:translate-x-0" aria-label="Sidebar">
            <div class="rounded  pb-4 overflow-y-auto md:bg-white dark" style="box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -30px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;">
              <ul class="space-y-2 font-medium text-[16px]">
                <li class="sm:hidden">
                  <a href="#" class="flex md:flex-col items-center lg:flex-row  md:border-b-2  items-centr p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-3 hover:bg-slate-100 dark:hover:bg-gray-700 group">
                    <i class="fa-regular fa-clock"></i>  </i>Academic Year: 2023-2024</span>
              </a>
            </li>
            <li class="sm:hidden">
              <a href="#" class="flex md:flex-col items-center lg:flex-row  md:border-b-2  items-centr p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-3 hover:bg-slate-100 dark:hover:bg-gray-700 group">
                <i class="fa-solid fa-envelope"></i><span class="p-[4px] text-[#fff]">SMS Available: 0</span>
              </a>
            </li>
            <li class="sm:hidden">
              <div><button id="dropdownNavbarLink" data-dropdown-toggle="dropdownNavbar" class=" self-center  sm:text-[14px] pl-[6px] pb-2 text-[#fff]"><i class="fa-solid fa-star"></i><span class="p-[4px]">More</span><span ><i class="fa-solid fa-caret-down"></i></span>
                </button>
                <div id="dropdownNavbar" class="z-10 hidden font-normal bg-white divide-y divide-gray-100 rounded-lg shaow w-44 dark:bg-gray-700 dark:divide-gray-600">
                  <ul class="py-2 text-sm text-gray-700 dark:text-gray-400" aria-labelledby="dropdownLargeButton">
                    <li>
                      <a href="#" class="block px-4 py-2 hover:bg-[#39A9E8] dark:hover:bg-gray-600 dark:hover:text-white">User Log</a>
                    </li>
                    <li>
                      <a href="#" class="block px-4 py-2 hover:bg-[#39A9E8] dark:hover:bg-gray-600 dark:hover:text-white">Manage Class</a>
                    </li>
                    <li>
                      <a href="#" class="block px-4 py-2 hover:bg-[#39A9E8] dark:hover:bg-gray-600 dark:hover:text-white">About School</a>
                    </li>
                  </ul>
                </div>
              </div>
            </li>
            <li>
              <span class="hidden md:block p-[3px] ml-2 text-left text-[14px] text-[#999b9c]">Main</span>
              <a href="<%= url_for :root %>" class="flex <%= params[:controller] == "home" && params[:action] == "index" ? 'activenav' : '' %> activebar md:flex-col items-center lg:flex-row  md:border-b-2 md:border-t-2  p-2  text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-3 hover:bg-slate-100 dark:hover:bg-gray-700 group">
                <span><i class="fa-solid fa-house"></i> </span><span class="ml-3 ">Dashbord</span>
              </a>
            </li>
            <li>
              <a href="#" class="activebar flex md:flex-col items-center lg:flex-row  md:border-b-2  items-centr p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-3 hover:bg-slate-100 dark:hover:bg-gray-700 group">
                <span><i class="fas fa-user"></i> </span><span class="ml-3">Profile</span>
              </a>
            </li>
            <%# drop down button %>
            <li>
              <a class="activebar main flex md:flex-col items-center lg:flex-row  md:border-b-2 items-cente p-2 text-white md:text-[#39A9E8] rounded-lg sm:hover:text-[#157AB5] hover:ml-3 hover:bg-[#39A9E8] sm:hover:bg-slate-100 hover:text-[#ffffff] dark:hover:bg-gray-700 group"><span><i class="fa-solid fa-plus"></i> </span><span class="ml-3 text-center ">Manage Fee</span></a>
              <ul class="bg-black opacity-[0.8] sm:opacity-[100%] sm:bg-white text-sm sub hidden"style="box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -60px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;">
                <li><a href="#" class="activebar block py-2 ml-3 p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-5 hover:bg-slate-100">Fees Payment </a></li>
                <li><a href="#" class="activebar block py-2 ml-3 p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-5 hover:bg-slate-100">Fee Due</a></li>
                <li><a href="#" class="activebar block py-2 ml-3 p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-5 hover:bg-slate-100">Fee collection </a></li>
              </ul>
            </li>
            <li>
              <a href="#" class="activebar flex md:flex-col items-center lg:flex-row  md:border-b-2 items-cente p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:bg-slate-100 hover:ml-3 dark:hover:bg-gray-700 group">
                <span><i class="fa-solid fa-calendar-days"></i> </span><span class="ml-3">Noticebord</span>
              </a>
            </li>
            <li>
              <a href="#" class="activebar flex md:flex-col items-center lg:flex-row  md:border-b-2 items-cente p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:bg-slate-100 hover:ml-3 dark:hover:bg-gray-700 group">
                <span><i class="fa-solid fa-envelope"></i> </span><span class="ml-3">Send SMS</span>
              </a>
            </li>
            <li>
              <a href="#" class=" activebar flex md:flex-col items-center lg:flex-row  md:border-b-2 items-cente p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:bg-slate-100 hover:ml-3 dark:hover:bg-gray-700 group">
                <span><i class="fa-regular fa-clock"></i> </span><span class="ml-3 text-center">Student Attendance</span>
              </a>
            </li>
            <li>
              <a href="#" class="activebar flex md:flex-col items-center lg:flex-row  md:border-b-2 items-cente p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:bg-slate-100 hover:ml-3 dark:hover:bg-gray-700 group">
                <span><i class="fa-regular fa-clock"></i></span><span class="ml-3 text-center">Teacher Attendance</span>
              </a>
            </li>
            <li>
              <a class="activebar mainb flex md:flex-col items-center lg:flex-row  md:border-b-2 items-cente p-2 text-white md:text-[#39A9E8] rounded-lg sm:hover:text-[#157AB5] hover:ml-3 hover:bg-[#39A9E8] sm:hover:bg-slate-100 hover:text-[#ffffff] dark:hover:bg-gray-700 group"><span><i class="fa-solid fa-plus"></i> </span><span class="ml-3 text-center">Manage Student</span></a>
              <ul class="bg-black opacity-[0.8] sm:opacity-[100%] sm:bg-white text-sm subb hidden" style="box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -60px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;">
                <li><a href="#" class="activebar block py-2 ml-3 p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-5 hover:bg-slate-100">Add New Student</a></li>
                <li><a href="#" class="activebar block py-2 ml-3 p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-5 hover:bg-slate-100">All Student</a></li>
              </ul>
            </li>
            <li>
              <a class="activebar mainc flex md:flex-col items-center lg:flex-row  md:border-b-2 items-cente p-2 text-white md:text-[#39A9E8] rounded-lg sm:hover:text-[#157AB5] hover:ml-3 hover:bg-[#39A9E8] sm:hover:bg-slate-100 hover:text-[#ffffff] dark:hover:bg-gray-700 group"><span><i class="fa-solid fa-plus"></i> </span><span class="ml-3 text-center">Manage Parent</span></a>
              <ul class="bg-black opacity-[0.8] sm:opacity-[100%] sm:bg-white text-sm subc hidden" style="box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -60px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;">
                <li>
                  <div  class="flex <%= params[:controller] == "admin/parent_users" && params[:action] == "new" ? 'activenav' : '' %> activebar block py-2 ml-3 p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-5 hover:bg-slate-100 group">
                    <span class="ml-3 "><%= link_to "Add New Parent", new_admin_parent_user_path %></span>
                  </div>
                </li>
                <li>
                  <div  class="flex <%= params[:controller] == "admin/parent_users" && params[:action] == "index" ? 'activenav' : '' %> activebar block py-2 ml-3 p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-5 hover:bg-slate-100 group">
                    <span class="ml-3 "><%= link_to "All Parent", admin_parent_users_path %></span>
                  </div>
                </li>
              </ul>
            </li>
            <li>
              <a class="activebar maind flex md:flex-col items-center lg:flex-row  md:border-b-2 items-cente p-2 text-white md:text-[#39A9E8] rounded-lg sm:hover:text-[#157AB5] hover:ml-3 hover:bg-[#39A9E8] sm:hover:bg-slate-100 hover:text-[#ffffff] dark:hover:bg-gray-700 group"><span><i class="fa-solid fa-plus"></i> </span><span class="ml-3 text-center">Manage Staff</span></a>
              <ul class="bg-black opacity-[0.8] sm:opacity-[100%] sm:bg-white text-sm subd hidden"style="box-shadow: rgba(50, 50, 93, 0.25) 0px 50px 100px -20px, rgba(0, 0, 0, 0.3) 0px 30px 60px -60px, rgba(10, 37, 64, 0.35) 0px -2px 6px 0px inset;">
                <li>
                  <div class="flex <%= params[:controller] == "admin/staff_users" && params[:action] == "new" ? 'activenav' : '' %> activebar block py-2 ml-3 p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-5 hover:bg-slate-100 group">
                    <span class="ml-3 "><%= link_to "Add New Parent", new_admin_staff_user_path %></span>
                  </div>
                </li>
                <li>
                  <div class="flex <%= params[:controller] == "admin/staff_users" && params[:action] == "index" ? 'activenav' : '' %> activebar block py-2 ml-3 p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:ml-5 hover:bg-slate-100 group">
                    <span class="ml-3 "><%= link_to "All Parent", admin_staff_users_path %></span>
                  </div>
                </li>
              </ul>
            </li>
            <li>
              <a href="#" class="activebar flex md:flex-col items-center lg:flex-row  md:border-b-2 items-cente p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:bg-slate-100 hover:ml-3 dark:hover:bg-gray-700 group">
                <span><i class="fa-solid fa-envelope"></i> </span><span class="ml-3 text-center text-center">Send SMS To Staff</span>
              </a>
            </li>
            <li>
              <a href="#" class="activebar flex md:flex-col items-center lg:flex-row  md:border-b-2 items-cente p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:bg-slate-100 hover:ml-3 dark:hover:bg-gray-700 group">
                <span><i class="fa-solid fa-envelope"></i> </span><span class="ml-3 text-center">SMS Reports</span>
              </a>
            </li>
            <li>
              <a href="#" class="activebar flex md:flex-col items-center lg:flex-row  md:border-b-2 items-cente p-2 text-white md:text-[#39A9E8] rounded-lg hover:text-[#157AB5] hover:bg-slate-100 hover:ml-3 dark:hover:bg-gray-700 group">
                <span><i class="fa-solid fa-plus"></i> </span><span class="ml-3 text-center">Promote Student</span>
              </a>
            </li>
          </ul>
        </div>
      </aside>
      <div class="p-2 mt-20 w-full md:w-[85%]">
      <% end %>
      <%= yield %>
      <%# <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk=" crossorigin="anonymous"></script>
      <script type="text/javascript" src="https://cdn.datatables.net/v/dt/dt-1.10.25/datatables.min.js"></script> %>
    </div>
  </div>
  <p class="notice"><%= notice %></p>
  <p class="alert"><%= alert %></p>
  <script>
    $(document).ready(function() {
      $('.main').click(function() {
        const el = $(this).parent().find('.sub');
        el.slideToggle('slow');
      });
    });

      $(document).ready(function() {
      $('.mainb').click(function() {
        const elb = $(this).parent().find('.subb');
        elb.slideToggle('slow');
      });
    });

      $(document).ready(function() {
      $('.mainc').click(function() {
        const elc = $(this).parent().find('.subc');
        elc.slideToggle('slow');
      });
    });
    $(document).ready(function() {
      $('.maind').click(function() {
        const eld = $(this).parent().find('.subd');
        eld.slideToggle('slow');
      });
    });


       //for parent table


    // $(document).ready(function() {
    // const themeSelect = $(".themeSelect");
    // const themeStylesheet = $("#themeStylesheet");
    // const themePaths = {
    //   default: "<%= asset_path('default.css') %>",
    //   dark: "<%= asset_path('dark.css') %>"
    // };
    // for theme selected by user work based on theme name and diffferent on css file
    // function activateTheme(themeName) {
    //   const selectedTheme = themePaths[themeName] || themePaths.default;
    //   themeStylesheet.attr("href", selectedTheme);

    //   localStorage.setItem("selectedTheme", themeName);
    // }

    // const storedTheme = localStorage.getItem("selectedTheme");
    // const initialTheme = storedTheme || "default";

    // activateTheme(initialTheme);
    // themeSelect.val(initialTheme);

    // $('#themeContent li').click( function() {
    //  const selectedValue = $(this).attr('value');
    //   activateTheme(selectedValue);
    //   openNavForTheme();
    // console.log('Selected value:', selectedValue);
    // });
    // });

    $(document).ready(function () {
      $('.activebar').on('click', function (e) {


    $('.activebar').removeClass('activenav');

    $(this).addClass('activenav');

    // $('.active').css({
    //   'margin-left': '6px',
    //   'background-color': '#2FA4E7',
    //   'color': 'white'

    // });

    // $('li a:not(.active)').css({
    //   'margin-left': '0',
    //   'background-color': '',
    //   'color': ''
    // });
      });
    });
  </script>
</body>
</html>
